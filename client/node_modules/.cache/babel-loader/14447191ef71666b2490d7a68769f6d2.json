{"ast":null,"code":"import _regeneratorRuntime from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{Box,Typography,TextField,CssBaseline,Button,Card,CardContent,Grid,Link}from\"@material-ui/core\";import{useHistory}from\"react-router-dom\";import UserContext from\"../../context/UserContext\";import Axios from\"axios\";import styles from\"./Auth.module.css\";var Login=function Login(){var history=useHistory();var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),usernameError=_useState4[0],setUsernameError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var onChangeUsername=function onChangeUsername(e){var newUsername=e.target.value;setUsername(newUsername);};var onChangePassword=function onChangePassword(e){var newPassword=e.target.value;setPassword(newPassword);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,url,loginRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newUser={username:username,password:password};url=\"/api/auth/login\";_context.next=5;return Axios.post(url,newUser);case 5:loginRes=_context.sent;if(loginRes.data.status===\"fail\"){setUsernameError(loginRes.data.message);setPasswordError(loginRes.data.message);}else{setUserData(loginRes.data);localStorage.setItem(\"auth-token\",loginRes.data.token);history.push(\"/\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:styles.background},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",style:{minHeight:\"100vh\"}},/*#__PURE__*/React.createElement(Box,{width:\"70vh\",boxShadow:1},/*#__PURE__*/React.createElement(Card,{className:styles.paper},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Login\"),/*#__PURE__*/React.createElement(\"form\",{className:styles.form,onSubmit:onSubmit},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",error:usernameError.length>0?true:false,helperText:usernameError,value:username,onChange:onChangeUsername}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",error:passwordError.length>0,helperText:passwordError,value:password,onChange:onChangePassword}),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.submit},\"Login\"))),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Link,{href:\"/register\",variant:\"body2\"},\"Need an account?\"))))))));};export default Login;","map":{"version":3,"sources":["/Users/linqiaosen/Desktop/domo/staging-demo-i/client/src/components/Authentication/Login.jsx"],"names":["React","useState","useContext","Box","Typography","TextField","CssBaseline","Button","Card","CardContent","Grid","Link","useHistory","UserContext","Axios","styles","Login","history","setUserData","username","setUsername","usernameError","setUsernameError","password","setPassword","passwordError","setPasswordError","onChangeUsername","e","newUsername","target","value","onChangePassword","newPassword","onSubmit","preventDefault","newUser","url","post","loginRes","data","status","message","localStorage","setItem","token","push","background","minHeight","paper","form","length","submit"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  CssBaseline,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Link,\r\n} from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserContext from \"../../context/UserContext\";\r\nimport Axios from \"axios\";\r\n\r\nimport styles from \"./Auth.module.css\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n  const { setUserData } = useContext(UserContext);\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [usernameError, setUsernameError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n\r\n  const onChangeUsername = (e) => {\r\n    const newUsername = e.target.value;\r\n    setUsername(newUsername);\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    const newPassword = e.target.value;\r\n    setPassword(newPassword);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newUser = { username, password };\r\n    const url = \"/api/auth/login\";\r\n    const loginRes = await Axios.post(url, newUser);\r\n\r\n    if (loginRes.data.status === \"fail\") {\r\n      setUsernameError(loginRes.data.message);\r\n      setPasswordError(loginRes.data.message);\r\n    } else {\r\n      setUserData(loginRes.data);\r\n      localStorage.setItem(\"auth-token\", loginRes.data.token);\r\n      history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.background}>\r\n      <CssBaseline />\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        justify=\"center\"\r\n        style={{ minHeight: \"100vh\" }}\r\n      >\r\n        <Box width=\"70vh\" boxShadow={1}>\r\n          <Card className={styles.paper}>\r\n            <CardContent>\r\n              <Typography component=\"h1\" variant=\"h5\">\r\n                Login\r\n              </Typography>\r\n              <form className={styles.form} onSubmit={onSubmit}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"username\"\r\n                  label=\"Username\"\r\n                  name=\"username\"\r\n                  autoComplete=\"username\"\r\n                  error={usernameError.length > 0 ? true : false}\r\n                  helperText={usernameError}\r\n                  value={username}\r\n                  onChange={onChangeUsername}\r\n                />\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  error={passwordError.length > 0}\r\n                  helperText={passwordError}\r\n                  value={password}\r\n                  onChange={onChangePassword}\r\n                />\r\n                <Box display=\"flex\" justifyContent=\"center\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={styles.submit}\r\n                  >\r\n                    Login\r\n                  </Button>\r\n                </Box>\r\n              </form>\r\n              <Grid container justify=\"center\">\r\n                <Grid item>\r\n                  <Link href=\"/register\" variant=\"body2\">\r\n                    Need an account?\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n        </Box>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}