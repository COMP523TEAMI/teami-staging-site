{"ast":null,"code":"import _regeneratorRuntime from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import UserContext from\"../../context/UserContext\";import styles from\"./PageTemplate.module.css\";import{Typography,IconButton,Box,Button,TextField,Container,Grid,Card,CardHeader,CardContent}from\"@material-ui/core\";import{motion}from\"framer-motion\";import CloseIcon from\"@material-ui/icons/Close\";import Axios from\"axios\";var SettingsModal=function SettingsModal(_ref){var setSettingsOpen=_ref.setSettingsOpen;return/*#__PURE__*/React.createElement(motion.div,{className:styles.backdrop,initial:{opacity:0},animate:{opacity:1},id:\"backdrop\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(motion.div,{animate:{opacity:1,y:-20}},/*#__PURE__*/React.createElement(SettingsModalContent,{setSettingsOpen:setSettingsOpen}))));};var SettingsModalContent=function SettingsModalContent(_ref2){var setSettingsOpen=_ref2.setSettingsOpen;var _useContext=useContext(UserContext),userData=_useContext.userData,setUserData=_useContext.setUserData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),activateSafetyButton=_useState2[0],setActiveSafetyButton=_useState2[1];var handleClick=function handleClick(){setSettingsOpen(false);};var handleResetOn=function handleResetOn(){setActiveSafetyButton(true);};var handleResetOff=function handleResetOff(){setActiveSafetyButton(false);};var resetAccount=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var headers,url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();headers={\"x-auth-token\":userData.token};url=\"/api/stock/\".concat(userData.user.id);_context.next=5;return Axios.delete(url,{headers:headers});case 5:response=_context.sent;if(response.data.status===\"success\"){setUserData({token:userData.token,user:response.data.user});window.location.reload();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function resetAccount(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",style:{minHeight:\"100vh\"}},/*#__PURE__*/React.createElement(Box,{width:\"60vh\",boxShadow:1},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{action:/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"Close\",onClick:handleClick},/*#__PURE__*/React.createElement(CloseIcon,null))}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h6\",align:\"center\"},\"Settings\"),/*#__PURE__*/React.createElement(\"form\",{className:styles.form,onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,disabled:true,id:\"Username\",label:\"Username\",name:\"Username\",autoComplete:\"Username\",value:userData.user.username}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,disabled:true,id:\"balance\",label:\"Cash Balance\",name:\"balance\",autoComplete:\"balance\",value:userData.user.balance})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.reset,onClick:handleResetOn},\"Reset My Account\")),activateSafetyButton&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{component:\"p\",variant:\"caption\",align:\"center\"},\"This is a permanent change. If you are sure press Reset.\"),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.reset,onClick:resetAccount},\"Reset\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.confirm,onClick:handleResetOff},\"Cancel\"))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)))));};export default SettingsModal;","map":{"version":3,"sources":["/Users/linqiaosen/Desktop/domo/staging-demo-i/client/src/components/Template/SettingsModal.jsx"],"names":["React","useState","useContext","UserContext","styles","Typography","IconButton","Box","Button","TextField","Container","Grid","Card","CardHeader","CardContent","motion","CloseIcon","Axios","SettingsModal","setSettingsOpen","backdrop","opacity","y","SettingsModalContent","userData","setUserData","activateSafetyButton","setActiveSafetyButton","handleClick","handleResetOn","handleResetOff","resetAccount","e","preventDefault","headers","token","url","user","id","delete","response","data","status","window","location","reload","minHeight","form","username","balance","reset","confirm"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport UserContext from \"../../context/UserContext\";\r\nimport styles from \"./PageTemplate.module.css\";\r\nimport {\r\n  Typography,\r\n  IconButton,\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Container,\r\n  Grid,\r\n  Card,\r\n  CardHeader,\r\n  CardContent,\r\n} from \"@material-ui/core\";\r\nimport { motion } from \"framer-motion\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Axios from \"axios\";\r\n\r\nconst SettingsModal = ({ setSettingsOpen }) => {\r\n  return (\r\n    <motion.div\r\n      className={styles.backdrop}\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      id=\"backdrop\"\r\n    >\r\n      <Container>\r\n        <motion.div animate={{ opacity: 1, y: -20 }}>\r\n          <SettingsModalContent setSettingsOpen={setSettingsOpen} />\r\n        </motion.div>\r\n      </Container>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst SettingsModalContent = ({ setSettingsOpen }) => {\r\n  const { userData, setUserData } = useContext(UserContext);\r\n  const [activateSafetyButton, setActiveSafetyButton] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setSettingsOpen(false);\r\n  };\r\n\r\n  const handleResetOn = () => {\r\n    setActiveSafetyButton(true);\r\n  };\r\n\r\n  const handleResetOff = () => {\r\n    setActiveSafetyButton(false);\r\n  };\r\n\r\n  const resetAccount = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const headers = {\r\n      \"x-auth-token\": userData.token,\r\n    };\r\n\r\n    const url = `/api/stock/${userData.user.id}`;\r\n    const response = await Axios.delete(url, {\r\n      headers,\r\n    });\r\n\r\n    if (response.data.status === \"success\") {\r\n      setUserData({\r\n        token: userData.token,\r\n        user: response.data.user,\r\n      });\r\n      window.location.reload();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={0}\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      justify=\"center\"\r\n      style={{ minHeight: \"100vh\" }}\r\n    >\r\n      <Box width=\"60vh\" boxShadow={1}>\r\n        <Card>\r\n          <CardHeader\r\n            action={\r\n              <IconButton aria-label=\"Close\" onClick={handleClick}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n            }\r\n          />\r\n          <CardContent>\r\n            <Typography component=\"h1\" variant=\"h6\" align=\"center\">\r\n              Settings\r\n            </Typography>\r\n            <form className={styles.form} onSubmit={(e) => e.preventDefault()}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                fullWidth\r\n                disabled\r\n                id=\"Username\"\r\n                label=\"Username\"\r\n                name=\"Username\"\r\n                autoComplete=\"Username\"\r\n                value={userData.user.username}\r\n              />\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                fullWidth\r\n                disabled\r\n                id=\"balance\"\r\n                label=\"Cash Balance\"\r\n                name=\"balance\"\r\n                autoComplete=\"balance\"\r\n                value={userData.user.balance}\r\n              />\r\n            </form>\r\n            <br />\r\n            <Box display=\"flex\" justifyContent=\"center\">\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={styles.reset}\r\n                onClick={handleResetOn}\r\n              >\r\n                Reset My Account\r\n              </Button>\r\n            </Box>\r\n            {activateSafetyButton && (\r\n              <div>\r\n                <Typography component=\"p\" variant=\"caption\" align=\"center\">\r\n                  This is a permanent change. If you are sure press Reset.\r\n                </Typography>\r\n                <Box display=\"flex\" justifyContent=\"center\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={styles.reset}\r\n                    onClick={resetAccount}\r\n                  >\r\n                    Reset\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={styles.confirm}\r\n                    onClick={handleResetOff}\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                </Box>\r\n              </div>\r\n            )}\r\n\r\n            <br />\r\n            <br />\r\n          </CardContent>\r\n        </Card>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default SettingsModal;\r\n"]},"metadata":{},"sourceType":"module"}