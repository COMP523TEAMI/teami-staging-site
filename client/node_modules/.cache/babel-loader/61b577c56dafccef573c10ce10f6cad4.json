{"ast":null,"code":"import _regeneratorRuntime from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import UserContext from\"../../context/UserContext\";import{TextField,Container,Grid,Box,Card}from\"@material-ui/core/\";import Autocomplete,{createFilterOptions}from\"@material-ui/lab/Autocomplete\";import{makeStyles}from\"@material-ui/core/styles\";import LineChart from\"../Template/LineChart\";import BarChart from\"./BarChart\";import styles from\"./Search.module.css\";import Axios from\"axios\";import InfoCard from\"./InfoCard\";import PriceCard from\"./PriceCard\";import PurchaseCard from\"./PurchaseCard\";import PurchaseModal from\"./PurchaseModal\";var filter=createFilterOptions();var useStyles=makeStyles(function(theme){return{paper:{padding:theme.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",marginBottom:\"40px\"}};});var LineChartCard=function LineChartCard(_ref){var pastDataPeriod=_ref.pastDataPeriod,stockInfo=_ref.stockInfo,duration=_ref.duration;return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:7,component:Card,className:styles.card,style:{minHeight:\"350px\"}},/*#__PURE__*/React.createElement(LineChart,{pastDataPeriod:pastDataPeriod,stockInfo:stockInfo,duration:duration}));};var BarChartCard=function BarChartCard(_ref2){var sixMonthAverages=_ref2.sixMonthAverages,stockInfo=_ref2.stockInfo;return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:true,component:Card,className:styles.card},/*#__PURE__*/React.createElement(BarChart,{sixMonthAverages:sixMonthAverages,stockInfo:stockInfo}));};var StockCard=function StockCard(_ref3){var setPurchasedStocks=_ref3.setPurchasedStocks,purchasedStocks=_ref3.purchasedStocks,currentStock=_ref3.currentStock;var _useContext=useContext(UserContext),userData=_useContext.userData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),stockInfo=_useState4[0],setStockInfo=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),sixMonthAverages=_useState6[0],setSixMonthAverages=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),pastDay=_useState8[0],setPastDay=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),pastMonth=_useState10[0],setPastMonth=_useState10[1];var _useState11=useState(undefined),_useState12=_slicedToArray(_useState11,2),pastTwoYears=_useState12[0],setPastTwoYears=_useState12[1];useEffect(function(){var getInfo=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"/api/data/prices/\".concat(currentStock.ticker);_context.next=3;return Axios.get(url);case 3:response=_context.sent;if(response.data.status===\"success\"){setStockInfo(response.data.data);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function getInfo(){return _ref4.apply(this,arguments);};}();getInfo();var getData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"/api/data/prices/\".concat(currentStock.ticker,\"/full\");_context2.next=3;return Axios.get(url);case 3:response=_context2.sent;if(response.data.status===\"success\"){setSixMonthAverages(response.data.sixMonthAverages);setPastDay(response.data.pastDay);setPastMonth(response.data.pastMonth);setPastTwoYears(response.data.pastTwoYears);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getData(){return _ref5.apply(this,arguments);};}();getData();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:styles.root},stockInfo&&pastDay&&/*#__PURE__*/React.createElement(InfoCard,{stockInfo:stockInfo,price:pastDay.adjClose}),sixMonthAverages&&pastDay&&pastMonth&&pastTwoYears&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(LineChartCard,{pastDataPeriod:pastTwoYears,stockInfo:stockInfo,duration:\"2 years\"}),/*#__PURE__*/React.createElement(BarChartCard,{sixMonthAverages:sixMonthAverages,stockInfo:stockInfo})),/*#__PURE__*/React.createElement(PriceCard,{pastDay:pastDay}),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(PurchaseCard,{setSelected:setSelected,balance:userData.user.balance}),/*#__PURE__*/React.createElement(LineChartCard,{pastDataPeriod:pastMonth,stockInfo:stockInfo,duration:\"month\"})),selected&&/*#__PURE__*/React.createElement(PurchaseModal,{stockInfo:stockInfo,pastDay:pastDay,setSelected:setSelected,setPurchasedStocks:setPurchasedStocks,purchasedStocks:purchasedStocks})));};var Search=function Search(_ref6){var setPurchasedStocks=_ref6.setPurchasedStocks,purchasedStocks=_ref6.purchasedStocks;var classes=useStyles();var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),value=_useState14[0],setValue=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),currentStock=_useState16[0],setCurrentStock=_useState16[1];var onSearchChange=function onSearchChange(event,newValue){setValue(newValue);if(newValue){setCurrentStock(newValue);}else{setCurrentStock(null);}};return/*#__PURE__*/React.createElement(Container,{className:classes.addMargin},/*#__PURE__*/React.createElement(Autocomplete,{value:value,onChange:onSearchChange,filterOptions:function filterOptions(options,params){var filtered=filter(options,params);if(currentStock){filtered=filtered.slice(0,4);}return filtered;},selectOnFocus:true,clearOnBlur:true,handleHomeEndKeys:true,id:\"stock-search-bar\",options:stocks,getOptionLabel:function getOptionLabel(option){return option.name;},renderOption:function renderOption(option){return option.name;},style:{maxWidth:\"700px\",margin:\"30px auto\",marginBottom:\"60px\"},renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{label:\"Search for a stock\",variant:\"outlined\"}));}}),currentStock&&/*#__PURE__*/React.createElement(StockCard,{setPurchasedStocks:setPurchasedStocks,purchasedStocks:purchasedStocks,currentStock:currentStock}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));};var stocks=[{name:\"Apple\",ticker:\"AAPL\"},{name:\"Amazon\",ticker:\"AMZN\"},{name:\"Google\",ticker:\"GOOG\"},{name:\"Microsoft\",ticker:\"MSFT\"},{name:\"Walmart\",ticker:\"WMT\"},{name:\"Intel\",ticker:\"INTC\"},{name:\"American Express\",ticker:\"AXP\"},{name:\"Boeing\",ticker:\"BA\"},{name:\"Cisco\",ticker:\"CSCO\"},{name:\"Goldman Sachs\",ticker:\"GS\"},{name:\"Johnson & Johnson\",ticker:\"JNJ\"},{name:\"Coca-Cola\",ticker:\"KO\"},{name:\"McDonald's\",ticker:\"MCD\"},{name:\"Nike\",ticker:\"NKE\"},{name:\"Procter & Gamble\",ticker:\"PG\"},{name:\"Verizon\",ticker:\"VZ\"},{name:\"Salesforce\",ticker:\"CRM\"},{name:\"Visa\",ticker:\"V\"},{name:\"UnitedHealth\",ticker:\"UNH\"},{name:\"IBM\",ticker:\"IBM\"},{name:\"Chevron\",ticker:\"CVX\"}];export default Search;","map":{"version":3,"sources":["/Users/linqiaosen/Desktop/domo/staging-demo-i/client/src/components/Search/Search.jsx"],"names":["React","useState","useEffect","useContext","UserContext","TextField","Container","Grid","Box","Card","Autocomplete","createFilterOptions","makeStyles","LineChart","BarChart","styles","Axios","InfoCard","PriceCard","PurchaseCard","PurchaseModal","filter","useStyles","theme","paper","padding","spacing","display","overflow","flexDirection","marginBottom","LineChartCard","pastDataPeriod","stockInfo","duration","card","minHeight","BarChartCard","sixMonthAverages","StockCard","setPurchasedStocks","purchasedStocks","currentStock","userData","selected","setSelected","undefined","setStockInfo","setSixMonthAverages","pastDay","setPastDay","pastMonth","setPastMonth","pastTwoYears","setPastTwoYears","getInfo","url","ticker","get","response","data","status","getData","root","adjClose","user","balance","Search","classes","value","setValue","setCurrentStock","onSearchChange","event","newValue","addMargin","options","params","filtered","slice","stocks","option","name","maxWidth","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport UserContext from \"../../context/UserContext\";\r\nimport { TextField, Container, Grid, Box, Card } from \"@material-ui/core/\";\r\nimport Autocomplete, {\r\n  createFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport LineChart from \"../Template/LineChart\";\r\nimport BarChart from \"./BarChart\";\r\nimport styles from \"./Search.module.css\";\r\nimport Axios from \"axios\";\r\nimport InfoCard from \"./InfoCard\";\r\nimport PriceCard from \"./PriceCard\";\r\nimport PurchaseCard from \"./PurchaseCard\";\r\nimport PurchaseModal from \"./PurchaseModal\";\r\n\r\nconst filter = createFilterOptions();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    marginBottom: \"40px\",\r\n  },\r\n}));\r\n\r\nconst LineChartCard = ({ pastDataPeriod, stockInfo, duration }) => {\r\n  return (\r\n    <Grid\r\n      item\r\n      xs={12}\r\n      sm={7}\r\n      component={Card}\r\n      className={styles.card}\r\n      style={{ minHeight: \"350px\" }}\r\n    >\r\n      <LineChart\r\n        pastDataPeriod={pastDataPeriod}\r\n        stockInfo={stockInfo}\r\n        duration={duration}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst BarChartCard = ({ sixMonthAverages, stockInfo }) => {\r\n  return (\r\n    <Grid item xs={12} sm component={Card} className={styles.card}>\r\n      <BarChart sixMonthAverages={sixMonthAverages} stockInfo={stockInfo} />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst StockCard = ({ setPurchasedStocks, purchasedStocks, currentStock }) => {\r\n  const { userData } = useContext(UserContext);\r\n  const [selected, setSelected] = useState(false);\r\n  const [stockInfo, setStockInfo] = useState(undefined);\r\n  const [sixMonthAverages, setSixMonthAverages] = useState(undefined);\r\n  const [pastDay, setPastDay] = useState(undefined);\r\n  const [pastMonth, setPastMonth] = useState(undefined);\r\n  const [pastTwoYears, setPastTwoYears] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    const getInfo = async () => {\r\n      const url = `/api/data/prices/${currentStock.ticker}`;\r\n      const response = await Axios.get(url);\r\n      if (response.data.status === \"success\") {\r\n        setStockInfo(response.data.data);\r\n      }\r\n    };\r\n\r\n    getInfo();\r\n\r\n    const getData = async () => {\r\n      const url = `/api/data/prices/${currentStock.ticker}/full`;\r\n      const response = await Axios.get(url);\r\n      if (response.data.status === \"success\") {\r\n        setSixMonthAverages(response.data.sixMonthAverages);\r\n        setPastDay(response.data.pastDay);\r\n        setPastMonth(response.data.pastMonth);\r\n        setPastTwoYears(response.data.pastTwoYears);\r\n      }\r\n    };\r\n\r\n    getData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      {stockInfo && pastDay && (\r\n        <InfoCard stockInfo={stockInfo} price={pastDay.adjClose} />\r\n      )}\r\n      {sixMonthAverages && pastDay && pastMonth && pastTwoYears && (\r\n        <div>\r\n          <Grid container spacing={3}>\r\n            <LineChartCard\r\n              pastDataPeriod={pastTwoYears}\r\n              stockInfo={stockInfo}\r\n              duration={\"2 years\"}\r\n            />\r\n            <BarChartCard\r\n              sixMonthAverages={sixMonthAverages}\r\n              stockInfo={stockInfo}\r\n            />\r\n          </Grid>\r\n          <PriceCard pastDay={pastDay} />\r\n          <Grid container spacing={3}>\r\n            <PurchaseCard\r\n              setSelected={setSelected}\r\n              balance={userData.user.balance}\r\n            />\r\n            <LineChartCard\r\n              pastDataPeriod={pastMonth}\r\n              stockInfo={stockInfo}\r\n              duration={\"month\"}\r\n            />\r\n          </Grid>\r\n          {selected && (\r\n            <PurchaseModal\r\n              stockInfo={stockInfo}\r\n              pastDay={pastDay}\r\n              setSelected={setSelected}\r\n              setPurchasedStocks={setPurchasedStocks}\r\n              purchasedStocks={purchasedStocks}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Search = ({ setPurchasedStocks, purchasedStocks }) => {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(null);\r\n  const [currentStock, setCurrentStock] = useState(null);\r\n\r\n  const onSearchChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    if (newValue) {\r\n      setCurrentStock(newValue);\r\n    } else {\r\n      setCurrentStock(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.addMargin}>\r\n      <Autocomplete\r\n        value={value}\r\n        onChange={onSearchChange}\r\n        filterOptions={(options, params) => {\r\n          let filtered = filter(options, params);\r\n          if (currentStock) {\r\n            filtered = filtered.slice(0, 4);\r\n          }\r\n          return filtered;\r\n        }}\r\n        selectOnFocus\r\n        clearOnBlur\r\n        handleHomeEndKeys\r\n        id=\"stock-search-bar\"\r\n        options={stocks}\r\n        getOptionLabel={(option) => {\r\n          return option.name;\r\n        }}\r\n        renderOption={(option) => option.name}\r\n        style={{\r\n          maxWidth: \"700px\",\r\n          margin: \"30px auto\",\r\n          marginBottom: \"60px\",\r\n        }}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            label=\"Search for a stock\"\r\n            variant=\"outlined\"\r\n          />\r\n        )}\r\n      />\r\n      {currentStock && (\r\n        <StockCard\r\n          setPurchasedStocks={setPurchasedStocks}\r\n          purchasedStocks={purchasedStocks}\r\n          currentStock={currentStock}\r\n        />\r\n      )}\r\n      <br />\r\n      <br />\r\n      <br />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst stocks = [\r\n  { name: \"Apple\", ticker: \"AAPL\" },\r\n  { name: \"Amazon\", ticker: \"AMZN\" },\r\n  { name: \"Google\", ticker: \"GOOG\" },\r\n  { name: \"Microsoft\", ticker: \"MSFT\" },\r\n  { name: \"Walmart\", ticker: \"WMT\" },\r\n  { name: \"Intel\", ticker: \"INTC\" },\r\n  { name: \"American Express\", ticker: \"AXP\" },\r\n  { name: \"Boeing\", ticker: \"BA\" },\r\n  { name: \"Cisco\", ticker: \"CSCO\" },\r\n  { name: \"Goldman Sachs\", ticker: \"GS\" },\r\n  { name: \"Johnson & Johnson\", ticker: \"JNJ\" },\r\n  { name: \"Coca-Cola\", ticker: \"KO\" },\r\n  { name: \"McDonald's\", ticker: \"MCD\" },\r\n  { name: \"Nike\", ticker: \"NKE\" },\r\n  { name: \"Procter & Gamble\", ticker: \"PG\" },\r\n  { name: \"Verizon\", ticker: \"VZ\" },\r\n  { name: \"Salesforce\", ticker: \"CRM\" },\r\n  { name: \"Visa\", ticker: \"V\" },\r\n  { name: \"UnitedHealth\", ticker: \"UNH\" },\r\n  { name: \"IBM\", ticker: \"IBM\" },\r\n  { name: \"Chevron\", ticker: \"CVX\" },\r\n];\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}