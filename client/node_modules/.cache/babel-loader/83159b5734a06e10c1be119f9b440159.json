{"ast":null,"code":"import _regeneratorRuntime from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/linqiaosen/Desktop/domo/staging-demo-i/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Box,Typography,TextField,CssBaseline,Button,Card,CardContent,Grid,Link}from\"@material-ui/core\";import{useHistory}from\"react-router-dom\";import Axios from\"axios\";import styles from\"./Auth.module.css\";var Register=function Register(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),usernameError=_useState4[0],setUsernameError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var onChangeUsername=function onChangeUsername(e){var newUsername=e.target.value;setUsername(newUsername);if(newUsername.length<4||newUsername.length>15){setUsernameError(\"Username must be between 4 and 15 characters.\");}else{setUsernameError(\"\");}};var onChangePassword=function onChangePassword(e){var newPassword=e.target.value;setPassword(newPassword);if(newPassword.length<6||newPassword.length>20){setPasswordError(\"Password must be between 6 and 20 characters.\");}else{setPasswordError(\"\");}};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,url,registerRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!usernameError&&!passwordError)){_context.next=8;break;}newUser={username:username,password:password};url=\"/api/auth/register\";_context.next=6;return Axios.post(url,newUser);case 6:registerRes=_context.sent;if(registerRes.data.status===\"fail\"){if(!registerRes.data.type){setPasswordError(registerRes.data.message);setUsernameError(registerRes.data.message);}else if(registerRes.data.type===\"username\"){setUsernameError(registerRes.data.message);}else if(registerRes.data.type===\"password\"){setPasswordError(registerRes.data.message);}}else{history.push(\"/login\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:styles.background},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",style:{minHeight:\"100vh\"}},/*#__PURE__*/React.createElement(Box,{width:\"70vh\",boxShadow:1},/*#__PURE__*/React.createElement(Card,{className:styles.paper},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Register\"),/*#__PURE__*/React.createElement(\"form\",{className:styles.form,onSubmit:onSubmit},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",error:usernameError.length>0?true:false,helperText:usernameError,value:username,onChange:onChangeUsername}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",error:passwordError.length>0?true:false,helperText:passwordError,value:password,onChange:onChangePassword}),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.submit},\"Register\"))),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Link,{href:\"/login\",variant:\"body2\"},\"Already have an account?\"))))))));};export default Register;","map":{"version":3,"sources":["/Users/linqiaosen/Desktop/domo/staging-demo-i/client/src/components/Authentication/Register.jsx"],"names":["React","useState","Box","Typography","TextField","CssBaseline","Button","Card","CardContent","Grid","Link","useHistory","Axios","styles","Register","history","username","setUsername","usernameError","setUsernameError","password","setPassword","passwordError","setPasswordError","onChangeUsername","e","newUsername","target","value","length","onChangePassword","newPassword","onSubmit","preventDefault","newUser","url","post","registerRes","data","status","type","message","push","background","minHeight","paper","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  CssBaseline,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Link,\r\n} from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\n\r\nimport styles from \"./Auth.module.css\";\r\n\r\nconst Register = () => {\r\n  const history = useHistory();\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [usernameError, setUsernameError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n\r\n  const onChangeUsername = (e) => {\r\n    const newUsername = e.target.value;\r\n    setUsername(newUsername);\r\n\r\n    if (newUsername.length < 4 || newUsername.length > 15) {\r\n      setUsernameError(\"Username must be between 4 and 15 characters.\");\r\n    } else {\r\n      setUsernameError(\"\");\r\n    }\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    const newPassword = e.target.value;\r\n    setPassword(newPassword);\r\n\r\n    if (newPassword.length < 6 || newPassword.length > 20) {\r\n      setPasswordError(\"Password must be between 6 and 20 characters.\");\r\n    } else {\r\n      setPasswordError(\"\");\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!usernameError && !passwordError) {\r\n      const newUser = { username, password };\r\n      const url = \"/api/auth/register\";\r\n      const registerRes = await Axios.post(url, newUser);\r\n\r\n      if (registerRes.data.status === \"fail\") {\r\n        if (!registerRes.data.type) {\r\n          setPasswordError(registerRes.data.message);\r\n          setUsernameError(registerRes.data.message);\r\n        } else if (registerRes.data.type === \"username\") {\r\n          setUsernameError(registerRes.data.message);\r\n        } else if (registerRes.data.type === \"password\") {\r\n          setPasswordError(registerRes.data.message);\r\n        }\r\n      } else {\r\n        history.push(\"/login\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.background}>\r\n      <CssBaseline />\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        justify=\"center\"\r\n        style={{ minHeight: \"100vh\" }}\r\n      >\r\n        <Box width=\"70vh\" boxShadow={1}>\r\n          <Card className={styles.paper}>\r\n            <CardContent>\r\n              <Typography component=\"h1\" variant=\"h5\">\r\n                Register\r\n              </Typography>\r\n              <form className={styles.form} onSubmit={onSubmit}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"username\"\r\n                  label=\"Username\"\r\n                  name=\"username\"\r\n                  autoComplete=\"username\"\r\n                  error={usernameError.length > 0 ? true : false}\r\n                  helperText={usernameError}\r\n                  value={username}\r\n                  onChange={onChangeUsername}\r\n                />\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  error={passwordError.length > 0 ? true : false}\r\n                  helperText={passwordError}\r\n                  value={password}\r\n                  onChange={onChangePassword}\r\n                />\r\n                <Box display=\"flex\" justifyContent=\"center\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={styles.submit}\r\n                  >\r\n                    Register\r\n                  </Button>\r\n                </Box>\r\n              </form>\r\n              <Grid container justify=\"center\">\r\n                <Grid item>\r\n                  <Link href=\"/login\" variant=\"body2\">\r\n                    Already have an account?\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n        </Box>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}